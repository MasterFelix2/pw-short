import React, { useState} from 'react'
import NewCampaignImage from '../../General/NewCampaignImage'
import { db } from '../../../firebase-config';
import { doc, getDoc, setDoc, updateDoc } from 'firebase/firestore';
import { useSelector } from 'react-redux'
import { useNavigate } from "react-router-dom"
import { GermanTerritories, SovietTerritories, NeutralTerritories, SovietFightingTerritories } from "../Main/svgComponents/MainMap";
import { GermanTerritoriesTaifun, SovietTerritoriesTaifun, NeutralTerritoriesTaifun, SovietFightingTerritoriesTaifun } from "../Main/svgComponents/TaifunMap";
import { setTerritoriesTaifun } from './setTerritoriesTaifun';
import { initializeGame } from './initializeGame';

const CreateMultiplayerGame = () => {

  const [selected, setSelected] = useState("");
  const navigate = useNavigate();
  const user = useSelector((state) => state.user.value)
  const [timeframe, setTimeframe] = useState(180);
  const [playerCount, setPlayerCount] = useState(2);
  const [open, setOpen] = useState('public');
  const [scenario, setScenario] = useState('standard');
  const [faction, setFaction] = useState('Germany');
  const [createLoaded, setCreateLoaded] = useState(null)
  const [createFinished, setCreateFinished] = useState(null)
  const territoryArray = [GermanTerritories, SovietTerritories, NeutralTerritories, SovietFightingTerritories];
  const territoryArrayTaifun = [GermanTerritoriesTaifun, SovietTerritoriesTaifun, NeutralTerritoriesTaifun, SovietFightingTerritoriesTaifun];

  const date = new Date();
  const currentTime = Date.now();
  const id = Date.now() + Math.random();
  const gameId = `hh${id}`;

  function setMap(campaign){
    setSelected(campaign);
    if(campaign === "barb"){
      setScenario("standard")
    }
    if(campaign === "kievScenario"){
      setScenario("taifun")
    }
  }

  async function createGame(e){

    navigate("/multiplayer");
    e.preventDefault();
    setCreateLoaded(true)

    if (playerCount === "Singleplayer"){
      await setDoc(doc(db, "games", gameId), {
        victory: 0,
        victoryConditionGer: false,
        victoryConditionRus: false,
        loaded: false,
        id: gameId,
        host: user.uid,
        state: "open",
        campaign: "barb",
        timeframe: timeframe,
        playerCount: playerCount,
        open: open,
        players: [user.uid],
        playersGermany: [],
        playersRussia: [],
        progress: 0,
        date: date,
        midnightStart: Math.floor(date.setHours(0,0,0,0)/1000),
        startDay: date.getDate(),
        startMonth: date.getMonth() +1,
        startYear: date.getFullYear(),
        currentDay: date.getDate(),
        currentMonth: date.getMonth() +1,
        currentYear: date.getFullYear(),
        germanTs: [],
        germanTerritoryPoints: 455,
        sovietTerritoryPoints: 2000,
        germanStrengthRatio: 3,
        germanInfantryResearchLevel:1,
        germanTankResearchLevel:1,
        sovietInfantryResearchLevel:1,
        sovietTankResearchLevel:1,
        scenario: scenario,
        AIpts: 0,
        lastPayoutAI: Math.floor(date.setHours(0,0,0,0)/1000),
      });

      const userAI = {uid: "AI", nickName: "AI"}
      if (faction === "Germany") { 
        initializeGame(userAI, gameId, "Russia");
      } else { 
        initializeGame(userAI, gameId, "Germany");
      }
      
    } else {
      await setDoc(doc(db, "games", gameId), {
        victory: 0,
        victoryConditionGer: false,
        victoryConditionRus: false,
        loaded: false,
        id: gameId,
        host: user.uid,
        state: "open",
        campaign: "barb",
        timeframe: timeframe,
        playerCount: playerCount,
        open: open,
        players: [user.uid],
        playersGermany: [],
        playersRussia: [],
        progress: 0,
        date: date,
        midnightStart: Math.floor(date.setHours(0,0,0,0)/1000),
        startDay: date.getDate(),
        startMonth: date.getMonth() +1,
        startYear: date.getFullYear(),
        currentDay: date.getDate(),
        currentMonth: date.getMonth() +1,
        currentYear: date.getFullYear(),
        germanTs: [],
        germanTerritoryPoints: 455,
        sovietTerritoryPoints: 2000,
        germanStrengthRatio: 3,
        germanInfantryResearchLevel:1,
        germanTankResearchLevel:1,
        sovietInfantryResearchLevel:1,
        sovietTankResearchLevel:1,
        scenario: scenario
      });
    }

    if(scenario === "standard"){

      await setDoc(doc(db, "games", gameId, "ww2", "actions"), {
        retreatedAll: 0,
        daugavaRF: false,
        smolenskRF: false,
        dniperRF: false,
        leningradFortified: false,
        moscowFortified: false,
        lastRFRussia: 0,
        RFBasesNorth: ["East Prussia"],
        RFBasesCenter: ["Poland"],
        RFBasesSouth: ["Poland"],
        RFBasesDeepSouth: ["Romania"],
        lastRFGermany: 0,
        daugavaDniperBroken: false,
        scenario: "standard for debugging",
        RFBasesNorthRus: ["Pskov"],
        RFBasesCenterRus: ["Minsk"],
        RFBasesSouthRus: ["Kiev"],
        RFBasesDeepSouthRus: ["Odessa"],
      });

      initializeGame(user, gameId, faction);

      await setDoc(doc(db, "games", gameId, "german", "territories"), {
        territories:[
          {
            name:"Finland",
            path: "m 104.39167,15.695791 c -1.67143,1.414956 -3.263,3.058116 -4.630726,4.477249 l -4.490164,0.187068 c -0.570867,0.982745 -1.20385,2.141644 -1.721858,3.183268 -0.260251,0.551225 -0.549715,1.162616 -0.634547,1.719283 0.73527,1.925602 1.235243,3.514925 1.795232,5.29373 l -1.497068,4.770768 2.245342,2.899566 -1.870686,2.806547 -1.216465,5.519041 -3.741372,-0.654738 -2.525945,-1.777153 -1.12241,0.06976 -3.285128,1.893432 -5.027083,0.396875 -3.902604,-1.389062 0.06615,-0.79375 -6.151563,-5.886979 -3.902604,-0.264584 -0.132292,2.315104 -2.579687,1.12448 c 0.659122,1.320758 1.476935,2.071193 2.702685,2.73473 1.633813,0.888309 3.12721,1.712327 4.771803,2.623084 l 8.003646,2.645833 3.730522,2.575555 2.993099,2.525943 -0.09354,4.677232 0.467672,6.173785 3.087151,3.461287 -0.654741,3.835424 -1.871202,3.554307 2.151806,1.777669 0.748273,3.834908 4.396632,-0.374137 2.244825,2.245339 1.497066,-0.841809 3.367235,2.338358 0.280604,7.01611 -6.173785,0.374136 -2.15129,2.899567 0.280604,0.748273 -4.116027,2.525945 -1.870687,2.618955 -6.454904,3.83543 -0.748274,1.68413 h -2.900082 l 0.09354,1.21595 -1.777153,0.65474 0.467672,2.05775 -2.244826,1.40355 -4.864301,-0.18708 0.187069,2.24483 -3.554823,3.18069 -0.09353,2.61896 2.993615,2.90008 -1.590601,3.55482 1.777669,0.65474 0.09354,1.40301 1.028877,0.65475 -0.09354,1.30999 1.496549,0.84181 -1.870686,-0.0935 v 2.71249 l -0.841809,1.87121 -0.561205,3.2737 0.374137,2.71301 h 2.80603 l 0.09353,-0.93534 0.561208,0.18707 0.374137,1.30948 2.993614,1.30948 h 3.461287 l -1.029393,1.02888 v 1.12292 l 1.216462,0.0935 -0.374137,0.74829 -1.497065,-0.37415 0.187068,1.12241 2.338874,1.5901 1.122413,-2.33836 c 0.326513,-0.13371 0.608088,-0.19676 0.94723,-0.19739 0.463328,0.75824 0.769268,1.44076 1.298112,2.16162 l -1.871205,-0.0935 v 0.65524 l 0.748276,0.093 0.964282,1.11569 1.852083,-0.7276 0.595313,-1.05834 1.058333,0.72761 1.455208,-0.52917 2.315104,-0.46302 2.182813,-0.66146 1.918229,0.72761 1.322917,-0.99219 0.396875,-0.66146 2.38125,-0.19844 1.984375,-0.13229 1.25677,-1.45521 1.389063,0.19844 1.653647,-1.05833 0.39687,0.85989 1.5875,-0.0661 c 0,0 0.0827,-0.26459 0.20671,-0.52917 0.12402,-0.26458 0.28939,-0.52917 0.45475,-0.52917 0.33073,0 3.30729,-0.39687 3.30729,-0.39687 l 0.19844,-0.79375 0.92604,0.66146 1.38907,0.0661 1.05833,-0.79375 1.65365,0.39688 1.12447,-1.25676 1.05834,0.99217 2.77812,0.0662 h 0.72761 l -0.19844,-0.85991 1.05833,0.0661 2.34353,-2.39675 0.60771,-0.93535 1.21647,0.0465 0.84181,-1.21594 2.94659,-0.0465 0.42064,-1.5906 c 0,0 2.05799,-1.02861 2.38539,-1.16892 0.32741,-0.14032 2.1518,-1.31 2.1518,-1.31 l 0.28061,-1.16892 2.19831,-1.5906 c 0,0 1.49676,-0.93506 2.01125,-1.16892 0.5145,-0.23386 1.21594,-1.07591 1.21594,-1.07591 l 0.28061,-1.30948 3.08715,-2.71301 1.45004,-0.84181 c 0,0 0.88848,-0.33915 1.77715,-0.72502 0.88867,-0.38586 1.77715,-0.81854 1.77715,-1.00562 0,-0.37418 0.28061,-2.61948 0.28061,-2.61948 l 3.05511,-2.66289 c -0.69542,-1.17881 -1.39687,-2.44962 -2.10153,-3.5881 -0.0167,-0.0291 -0.56017,-0.75033 -0.57207,-0.77413 -1.54478,-1.06791 -1.70671,-1.8946 -3.09417,-2.42263 -1.93724,-0.8263 -3.76532,-1.89198 -5.61258,-2.89957 0.1792,-0.93887 0.24522,-2.17438 0.93535,-2.80655 0.65481,-0.28063 2.43189,-1.96422 2.43189,-1.96422 l -0.37414,-2.43241 -2.89956,-1.02888 -1.0294,-1.49655 v -2.619478 l -1.96422,-1.590082 -1.68362,-1.122413 1.77716,-2.619478 0.74827,-2.619478 -0.46767,-3.180168 4.77077,-2.338876 0.0935,-3.180168 -1.02888,-3.08715 -1.30948,-3.741888 2.24483,-2.712498 1.21594,-3.367752 -2.33835,-3.554822 -2.52595,-2.525427 -4.11603,-3.554822 -0.74827,-2.338359 -4.67724,-0.561723 -5.79964,-5.519042 -0.37414,-6.267318 v -4.490164 l -2.80603,-1.122413 1.21595,-4.022495 -1.96474,-3.74189 -0.84181,-4.396629 -4.5837,-2.899566 h -3.83542 c -0.46378,-0.738345 -0.95264,-1.499568 -1.44953,-2.245342 -0.57167,-0.744822 -1.06312,-1.770314 -1.77695,-2.232168 z",
            type: "tank"
          },
          {
              name:"Romania",
              path:"M 102.20586,267.0321 L 100.24939,267.33854 L 97.768934,267.23934 L 96.148354,268.29767 L 94.163464,270.54663 L 93.899766,273.49335 L 90.990012,271.11662 L 89.931678,271.67886 L 85.896782,271.61326 L 85.499907,270.91873 H 82.887665 L 81.895478,270.588 L 80.90329,270.5549 L 80.737926,269.79422 L 78.488449,269.66246 L 78.024912,270.35752 L 76.900433,270.09293 H 76.899917 L 74.876783,272.23026 L 71.930195,273.3997 L 70.012482,275.13033 L 69.40425,276.72043 L 68.60895,276.58038 L 67.907701,278.03043 L 66.785288,278.68517 L 66.644728,280.27524 C 66.211036,280.36494 65.713553,280.32534 65.336288,280.48014 C 65.338688,280.98071 65.454774,281.4299 65.56936,281.91263 L 64.072811,282.42679 L 64.212855,283.68978 L 63.464579,284.11094 V 285.18684 L 62.669797,286.21573 L 61.266264,286.63636 L 59.161483,286.54286 L 58.600278,288.08644 L 57.290797,288.17994 L 57.056701,287.61874 L 55.373083,287.66574 L 54.575201,288.84086 V 289.70076 L 57.7502,291.28826 L 58.742388,293.33878 L 59.602284,295.58774 L 62.380409,296.05076 L 62.711138,297.04295 L 64.298638,297.77055 L 64.232488,300.54867 L 66.216863,300.81326 L 66.547592,301.54086 L 67.936655,301.27628 L 69.590301,302.79763 L 71.045509,302.86373 L 72.368425,301.21008 C 73.149365,301.42692 73.762424,301.8832 74.418946,302.33456 L 74.088217,302.79758 H 73.228321 L 72.831446,304.05435 L 74.154363,305.44342 L 74.305773,306.2382 L 76.748518,306.46714 L 76.935586,306.93532 L 75.626108,307.87068 L 75.672618,309.03958 L 77.496796,309.22717 C 78.139439,308.9205 78.783641,308.63741 79.330285,308.36543 C 81.661762,308.7629 83.71309,309.77337 85.915922,310.02279 C 86.988171,310.26057 87.914733,310.36741 89.049581,310.49042 L 91.294924,309.78917 L 92.791474,309.88217 L 93.820354,310.5369 L 95.410434,309.83512 L 96.112204,310.44337 C 97.710586,310.77032 99.498271,310.51007 101.00032,310.52997 C 101.53694,310.00437 101.92051,309.29704 102.46622,308.87993 C 102.90109,308.54086 103.26422,308.224 103.5721,307.82573 C 103.98527,307.50551 104.53609,307.47866 104.99896,307.49453 L 106.37304,306.97208 C 106.58472,307.66339 106.87263,308.3248 107.15025,308.99109 L 111.54689,310.48763 L 115.38748,310.58997 L 116.13059,311.84415 L 120.69051,313.5479 H 120.69103 H 123.07228 C 123.6676,313.5479 124.79207,313.21718 124.79207,313.21718 C 124.79207,313.21718 125.38738,312.42337 125.38738,312.15884 C 125.38738,311.89423 125.1228,309.97603 125.1228,309.97603 L 125.1258,309.87633 C 125.1729,308.12945 125.213,306.63218 125.2566,305.01511 C 125.6433,304.43651 126.28033,304.2446 126.8441,303.82449 C 127.10869,303.5599 128.03473,302.03855 128.03473,302.03855 L 128.36546,300.71563 C 127.82537,300.40363 127.15039,300.2268 126.71181,299.72345 C 127.0051,298.62685 128.25436,298.33359 129.22422,298.26932 L 128.95964,299.72453 L 130.21641,300.45213 C 131.09861,300.46483 132.00631,300.66805 132.86224,300.38593 C 133.26037,300.10587 133.65457,299.99152 134.11901,299.85676 C 134.19161,299.10033 133.50278,297.92222 133.9092,297.27707 C 134.24009,297.036 134.63838,296.89016 134.97891,296.68176 C 135.19823,296.46245 135.46667,295.80125 135.58197,295.53042 L 133.09168,295.18988 L 132.00028,294.62764 C 130.17587,295.0809 128.36045,295.56875 126.54324,296.04978 L 124.36043,296.31436 C 124.03454,296.65248 121.78186,295.16764 121.12025,294.82555 H 121.11973 L 120.98744,290.22841 L 120.98644,290.22041 L 120.65674,287.5818 L 121.45049,287.01956 C 121.47279,286.47875 121.23759,285.73646 121.45749,285.30236 C 121.61348,285.01302 121.79843,284.70767 121.96484,284.45175 C 121.67326,282.87691 121.04063,281.77358 120.22702,280.47114 L 119.13561,280.04172 L 118.60644,279.14875 C 118.08829,279.09375 117.57013,279.03882 117.05202,278.9834 L 116.98532,277.62741 L 116.45615,276.73444 L 115.43089,274.61724 L 113.74418,274.31959 H 113.74318 V 274.31659 C 113.35806,273.27736 112.9992,272.19475 112.64783,271.23774 C 112.13137,270.65745 111.53967,270.04552 110.8785,269.74375 C 110.22905,269.48534 109.57375,269.24915 108.94787,269.02443 L 108.20166,269.49779 L 108.18716,269.35516 L 104.08612,269.15672 Z",
              type: "tank"
          },
          {
              name:"Czechoslovakia",
              path:"M 0.17260032,262.4736 L 2.0314017,263.60014 L 3.622002,264.16135 L 4.3232513,264.536 L 5.7267833,263.50661 L 5.6797573,264.02131 H 6.849195 L 8.25221,262.6648 L 9.6552253,262.52476 L 9.9358283,261.35532 C 10.331791,260.99673 10.666754,260.62088 11.107845,260.37659 C 11.349332,260.41829 11.579903,260.6165 11.759997,260.74678 L 12.0406,260.37264 C 12.572014,260.30254 13.030682,260.23326 13.584175,260.18564 C 14.128199,260.50432 14.527759,260.91969 14.987195,261.35505 L 16.156632,261.54212 L 17.560164,261.16798 L 19.711454,262.38393 L 21.442098,262.52449 L 21.76921,261.96328 L 24.061059,262.05628 L 24.85636,263.17921 L 26.119333,262.99214 L 26.259374,263.59985 L 25.838729,264.72278 L 25.791699,266.49993 L 26.539975,267.85644 L 27.662903,268.60471 L 28.364153,268.83829 L 28.738289,269.77415 L 30.235357,270.94307 L 32.246603,272.11251 C 34.545589,272.82502 36.927099,272.5239 39.297852,272.47115 C 39.635525,272.04053 39.914975,272.01174 40.391843,271.96167 C 41.156455,271.87997 41.850251,271.80101 42.638217,271.71053 L 42.373633,270.58605 L 43.928061,269.36235 C 43.928061,269.36235 47.301498,269.42845 47.466863,269.42845 C 47.99801,269.06145 48.20986,268.31669 48.392909,267.77489 C 48.990044,267.85059 49.608663,267.68189 50.178332,267.73949 C 50.55377,268.08837 51.057454,268.30181 51.468691,268.53586 C 52.135405,268.50116 52.750702,268.57866 53.419993,268.43666 C 53.90603,268.18866 54.025722,267.57148 54.390989,267.38401 C 54.730031,267.27283 55.077146,267.20995 55.437437,267.14681 C 55.897855,266.78344 56.075125,265.97935 56.669403,265.79072 C 57.09901,265.73092 57.327639,265.2722 57.591832,264.99336 C 58.089443,264.96716 58.489317,265.01356 58.94317,265.06316 L 60.100723,264.30248 L 60.8614,265.03008 L 65.227025,264.96398 L 65.458535,265.427 C 65.458535,265.427 66.41765,265.4601 66.549941,265.4601 C 66.66394,265.6509 66.648981,265.84946 66.649151,266.05568 C 67.112409,266.48762 67.794368,266.75587 68.269727,267.04774 C 69.269485,267.30461 70.304028,267.02904 71.312435,266.91545 L 71.643164,266.25399 C 71.987331,266.31759 72.304449,266.31759 72.602274,266.28679 C 72.610574,266.28079 72.618284,266.27979 72.626034,266.28279 C 72.670794,266.31109 72.671724,266.37899 72.689074,266.41558 C 72.758074,266.7278 72.779144,267.07664 72.800714,267.37831 C 73.042555,267.25438 73.278814,267.15408 73.522635,267.06156 C 73.945914,267.46889 74.263283,268.05036 74.685903,268.40326 L 74.586683,268.93242 C 74.999364,269.0385 75.413435,269.12938 75.810381,269.19692 C 76.235732,269.43122 76.548663,269.75529 76.90179,270.08983 L 78.026269,270.35441 L 78.48929,269.65988 L 80.738248,269.79217 L 80.903613,270.55285 L 81.8958,270.58595 L 82.887988,270.91668 H 85.500748 L 85.897623,271.61121 L 89.932519,271.67731 C 90.940474,271.28196 91.034201,271.00885 90.790342,270.14823 C 90.557907,270.09223 90.285393,270.11143 90.076686,270.10793 C 90.026526,269.64961 90.081086,269.23412 90.130966,268.79994 L 88.642684,267.84083 L 88.444247,266.81557 L 87.220549,266.02182 L 85.434611,265.82338 C 85.434611,265.82338 85.194833,265.54226 84.950921,265.24047 C 84.751043,264.98949 84.561346,264.73911 84.424328,264.50614 C 84.121712,264.41534 83.761457,264.46034 83.488984,264.48304 C 82.994748,264.47404 82.552795,263.93275 82.160384,263.64124 L 80.176009,263.67434 L 80.043717,263.07903 L 78.48929,263.2444 L 78.39007,262.25221 C 78.061261,262.1134 77.684292,261.9136 77.393749,261.74014 C 76.833365,261.37472 76.74076,260.83877 76.380379,260.38516 C 75.608258,260.15698 74.545628,260.27855 73.693728,260.26776 L 73.594508,258.71333 L 68.435133,257.91958 L 66.053883,256.79511 L 62.94503,257.12583 L 59.902321,258.05188 L 57.984092,257.05969 L 54.809092,257.72115 L 53.221592,258.31646 L 51.171071,257.85344 L 48.789821,255.47219 L 44.887217,257.12583 L 42.241384,255.67063 V 253.35552 L 40.918467,252.03261 L 40.257009,250.5774 L 38.603363,250.643 L 37.809613,251.30446 L 35.296071,249.71696 L 33.047113,249.12164 L 33.907009,246.01279 C 33.907009,246.01279 33.658962,246.17815 33.344769,246.36832 C 33.030577,246.55849 32.650238,246.77346 32.385655,246.87268 C 32.319505,246.89748 32.226489,246.90878 32.114354,246.90988 C 32.002215,246.91067 31.870961,246.90188 31.728329,246.88458 C 31.443085,246.85048 31.112347,246.78638 30.798155,246.71611 C 30.169769,246.57559 29.60753,246.41019 29.60753,246.41019 L 27.1601,245.02092 H 25.969475 L 27.292392,246.74071 L 26.300204,247.79904 L 24.315829,248.85738 L 23.522079,246.80685 L 21.339267,245.81467 L 22.133017,243.96258 L 21.60385,242.9704 L 18.296558,242.63967 L 15.386142,242.04435 L 13.137183,241.71363 L 11.615829,239.59696 L 9.6314544,239.46467 L 9.5653084,241.05217 L 7.5147876,241.3829 L 6.7871835,239.7954 L 5.5304127,239.46467 L 3.7444752,240.98602 L 1.429371,241.31675 L 0.17260022,241.74463 Z",
              type: "inf"
          },
          {
              name:"East Prussia",
              path:"M 75.711141,213.27092 L 75.86152,211.91699 L 74.739107,211.09844 L 74.785617,210.11659 L 74.271437,209.83547 L 74.317947,208.08157 L 75.32357,207.77771 L 75.25329,206.81911 L 74.645576,204.99494 L 75.557664,204.36345 C 75.990472,203.88687 76.392218,203.3935 76.84389,202.98369 C 76.026233,201.92686 74.578255,201.22326 73.499398,200.83191 L 73.359357,200.01335 C 72.489302,199.33456 71.410419,199.72296 70.529556,199.45238 C 70.213345,199.14413 69.857917,198.90429 69.476906,198.63382 C 68.290786,198.39285 67.271762,197.56715 66.413528,196.97346 C 66.386138,196.54897 66.367498,196.18322 66.366518,195.73426 C 66.129444,195.28518 65.77592,194.86131 65.498352,194.50074 C 65.055207,193.92343 64.599619,193.35589 64.144947,192.78767 H 61.455704 L 61.478964,193.69976 C 61.744047,193.71616 61.97192,193.73706 62.25101,193.76946 C 62.29127,194.0431 62.20126,194.29721 62.13368,194.56472 C 61.768001,194.70741 61.499508,194.82156 61.15183,194.91562 C 61.018027,195.06898 61.013335,195.25492 60.98802,195.45363 L 60.356533,196.17866 L 60.496575,197.62818 L 61.923361,197.83902 L 62.087176,196.15488 L 62.741916,196.81014 L 63.092799,198.14288 L 63.069039,198.93818 L 62.48458,199.19552 V 201.55714 L 62.157467,202.30541 C 61.388801,202.33491 60.550832,202.38181 59.824276,202.29091 C 59.571106,202.26321 59.428137,202.19901 59.321945,202.00731 C 58.964624,201.90243 58.522435,201.95341 58.2047,201.97831 C 57.953203,201.80847 57.776375,201.57655 57.643493,201.32357 C 57.879649,201.0242 58.462783,201.1276 58.796898,201.09827 C 58.956197,200.80816 59.010698,200.43153 59.047022,200.13089 C 59.273201,199.90851 59.6752,199.81824 59.935339,199.73352 C 59.935339,199.73352 60.660604,198.56385 60.800918,198.32999 C 60.483053,198.15048 59.878674,198.23789 59.490949,198.28359 C 58.737412,198.99888 58.103865,199.74521 57.293151,200.38837 C 56.960508,200.43477 56.580904,200.34747 56.287528,200.29427 L 55.609017,201.27664 L 54.673672,201.18314 L 54.43958,201.72109 C 53.579696,201.76219 52.648867,201.73459 51.820616,201.82449 C 51.679269,202.88643 51.765246,203.76148 51.843846,204.73797 L 55.09481,204.78497 L 55.14132,205.15911 L 53.410675,205.32293 L 53.223606,206.02418 L 51.563243,206.42157 C 50.734765,207.22816 49.87065,207.57117 48.803721,207.89538 L 48.195491,208.59663 L 46.381648,208.41524 C 45.837267,209.42863 44.927931,210.1178 44.027279,210.62553 C 43.307504,211.35722 42.588008,212.02029 42.001563,212.80937 C 41.80608,213.58162 41.764615,214.27172 41.646031,215.0573 L 46.077802,214.9912 L 47.334573,216.51255 L 50.178843,215.32193 L 51.898635,215.91724 L 52.560093,217.76932 L 55.668947,219.22453 L 57.190302,217.76932 L 61.291343,217.96776 L 63.077281,217.24016 L 68.104364,216.97557 C 68.074804,216.74975 68.189974,216.63174 68.288318,216.48155 C 68.898577,216.30067 69.458365,216.42965 70.02568,216.30895 C 70.798304,216.05692 71.38072,215.78117 72.006954,215.3881 C 73.12482,214.48119 74.433327,213.9101 75.711141,213.27092 Z",
              type: "tank",
          },
          {
              name:"Poland",
              path:"M 38.60333,250.64278 L 40.256976,250.57718 L 40.918434,252.03238 L 42.241351,253.3553 V 255.67041 L 44.887184,257.12561 L 48.789788,255.47197 L 51.171038,257.85322 L 53.221559,258.31624 L 54.809059,257.72093 L 57.984059,257.05947 L 59.902288,258.05166 L 62.41583,257.12561 L 66.053851,256.79488 L 68.435101,257.91936 L 73.594476,258.71311 L 71.345517,253.48759 L 75.777288,253.61988 L 76.041871,253.02457 L 75.578851,250.51103 L 78.819996,249.51884 L 80.936147,249.28837 L 81.497352,248.54009 L 80.094338,246.85596 L 80.562008,243.67579 L 78.971925,241.14984 L 78.784857,238.43683 L 80.000803,236.47261 L 81.994996,235.62822 C 82.239384,235.17615 82.423521,234.78475 82.608912,234.31667 C 82.872156,233.18964 82.759256,231.96563 82.78875,230.79957 C 81.463722,230.3573 79.982059,230.22801 78.82,229.60895 C 78.72969,228.96406 79.164767,228.19058 79.415316,227.69072 L 81.531982,227.49228 C 81.71312,226.89395 81.826877,226.32497 81.836866,225.80918 C 81.241421,225.35001 80.480873,225.27915 79.79771,225.13268 C 78.982305,224.87437 78.79757,224.23182 78.489274,223.52348 L 79.613753,222.13442 L 80.93667,222.26671 L 81.201253,219.88546 L 79.084587,218.43025 L 79.878337,216.11515 L 75.711149,213.27088 C 73.647341,214.00339 71.988096,215.71254 70.025709,216.30842 C 69.433542,216.49224 68.819274,216.24902 68.288346,216.48102 C 68.127243,216.60872 68.116866,216.80796 68.104373,216.97505 L 63.07729,217.23963 L 61.291352,217.96724 L 57.190311,217.7688 L 55.668957,219.22401 L 52.560103,217.7688 L 51.898644,215.91672 L 50.178853,215.3214 L 47.334582,216.51203 L 46.077811,214.99068 L 41.64604,215.05678 C 41.863292,214.34259 41.70577,213.45764 42.001574,212.80886 C 42.625456,211.99869 43.289576,211.34854 44.02729,210.62501 C 45.105778,210.08514 45.836928,209.17681 46.276778,208.41579 C 46.728469,207.97866 47.268729,207.68278 47.74594,207.31767 C 48.108786,206.88002 48.58422,206.75519 49.120523,206.68932 C 49.649689,206.62322 50.178856,206.59012 50.178856,206.59012 L 50.774168,205.73022 H 48.52521 L 45.680939,207.11928 L 43.365835,208.17762 L 40.323127,206.65626 L 39.198648,203.48126 L 37.214273,203.34846 L 37.41271,204.67137 L 35.296044,206.72189 L 34.700731,207.97866 L 33.377814,209.037 L 33.708544,210.16148 L 32.782502,211.02137 L 31.459585,211.21981 L 30.731981,210.69064 L 29.739794,211.3521 C 29.829364,211.62278 29.938287,211.83582 30.074656,212.07764 C 30.49934,212.53313 31.215156,212.69626 31.790314,212.9396 L 31.724174,215.91616 L 30.202819,217.17293 L 28.549174,219.2896 L 26.961674,218.89273 L 26.23407,219.81877 C 25.238876,219.85467 24.541162,220.18628 23.720528,220.67866 L 22.000736,222.13387 L 19.024174,222.39846 L 17.105945,224.18439 L 17.833549,225.50731 L 17.304382,227.95471 L 17.50282,229.60835 L 19.09032,230.07137 L 20.34709,231.46043 L 22.133028,232.18804 L 22.72834,233.44481 C 22.72834,233.44481 23.125215,233.34561 23.530359,233.29598 C 24.448194,233.16171 24.762465,233.91783 25.465127,234.38744 C 25.986026,234.73471 26.498656,235.03237 26.498656,235.03237 L 28.483031,235.09847 L 29.475218,234.43701 L 31.98876,234.83389 L 31.790322,236.61983 L 33.973135,237.21514 L 34.237718,239.53024 C 35.098004,238.96072 35.989705,238.45966 36.900088,238.25691 C 37.850488,237.9903 38.387821,238.75103 38.884463,239.41449 C 39.547434,240.42009 40.507151,241.16362 41.381468,241.97764 C 41.350068,242.67658 41.26223,243.29102 41.315288,244.02816 C 41.813396,244.66644 42.59694,245.23252 43.167371,245.6818 L 41.513725,247.07087 C 40.826659,247.11777 40.28476,247.20139 39.793933,247.46771 C 39.661642,247.79844 38.603308,250.64271 38.603308,250.64271 Z",
              type: "tank"
          },
          {
              name:"Norway",
              path:"M 102.99489,0.17837 L 97.83552,0.376808 C 97.70669,2.62399 98.01988,4.821876 97.76942,6.792954 C 97.37171,7.761559 96.87678,8.75667 96.46304,9.61242 C 95.85121,10.877459 95.2559,12.08462 95.2559,12.08462 L 92.940685,2.89035 L 91.287039,4.610141 L 90.427143,13.473683 C 90.067346,14.137592 89.744095,14.726947 89.384312,15.371243 C 88.522499,16.659108 87.899358,18.367904 86.855266,19.36069 C 86.912746,16.344212 87.275014,13.211312 87.582914,10.695596 L 84.804789,15.39195 L 83.151144,13.275283 L 79.645414,16.847158 L 76.867289,14.532054 L 74.221456,17.508617 L 73.69229,21.014346 L 71.31104,20.220596 L 68.334477,22.866429 L 65.556352,21.345075 L 63.571977,24.189346 L 61.389165,30.142471 L 59.074061,27.496637 L 54.973019,28.422679 L 52.327186,31.663825 L 39.362602,31.994554 L 36.584477,39.66747 L 32.681873,40.858095 V 43.107054 L 25.27354,46.282054 L 24.47979,47.935699 L 32.218853,47.538824 L 32.284993,48.861741 L 21.106348,49.721637 L 24.016764,52.698199 L 23.619889,54.087262 L 19.849577,54.153412 L 19.651139,51.309141 L 12.17666,56.071641 L 11.515202,57.857578 L 13.102702,60.701849 L 8.0756188,61.032579 L 5.4297848,63.546119 L 7.4141598,64.075289 L 16.740723,62.421639 L 16.806873,63.876849 L 14.425623,66.191949 L 13.03656,65.001329 L 5.6943728,65.133619 L 4.1068725,67.647159 L 0.1737793,68.133949 V 102.74838 L 2.3870809,102.70448 L 3.908435,101.38157 L 4.0407267,98.008129 L 0.8657267,95.891459 C 0.8657267,95.891459 0.9318727,94.766979 0.9318727,94.502399 C 0.9318727,94.237819 5.495935,90.202919 5.495935,90.202919 L 5.165206,89.144589 L 6.818852,87.160209 L 7.017289,84.249799 L 7.48031,78.428959 L 8.207914,77.238339 L 11.515206,77.304439 L 14.557914,75.716939 L 14.756352,72.608079 L 18.129789,69.102349 L 21.900102,66.456519 C 21.900102,66.456519 22.032393,63.876829 22.032393,63.413809 C 21.964043,63.052309 21.754668,62.933989 21.437081,62.818499 L 21.172498,60.834129 L 24.744372,57.659125 L 25.008956,56.600792 L 29.903747,53.359646 L 36.121456,53.822667 L 37.64281,51.838292 L 37.775101,47.208083 L 43.19906,47.472667 L 51.996455,49.853917 L 56.229789,43.305479 L 55.89906,41.188813 L 60.066247,41.585688 L 62.645934,40.461208 L 62.778226,38.146104 L 66.68083,38.410688 L 72.832393,44.297667 L 72.766243,45.091417 L 76.668847,46.480479 L 81.69593,46.083604 L 84.981002,44.19018 L 86.103412,44.12042 L 88.629358,45.897573 L 92.37073,46.552311 L 93.587194,41.03327 L 95.45788,38.226723 L 93.212539,35.327157 L 94.709607,30.556389 C 94.174156,28.761975 93.509453,26.929647 92.912274,25.185149 C 93.069234,24.44288 93.456656,23.723227 93.766995,23.107239 C 94.297957,22.089309 94.722227,21.30743 95.27078,20.360118 L 99.76094,20.17305 C 99.76094,20.17305 100.02969,19.892234 100.43894,19.471285 C 101.89621,18.299989 102.90945,16.465031 104.48008,15.695801 C 105.39866,16.702128 106.0315,17.706964 106.71099,18.751953 C 107.02644,19.237515 107.3079,19.678096 107.61843,20.173054 H 111.45386 L 116.03755,23.07262 L 116.87936,27.469249 L 119.00229,23.792472 L 119.06839,22.07268 L 119.39912,19.757576 L 122.04496,21.146638 L 123.6986,20.48518 L 121.78037,16.648722 L 116.35641,16.317993 C 115.52721,15.949364 114.61121,15.534744 113.8098,15.16044 C 112.95352,14.71953 111.96103,14.353992 111.26315,13.80445 C 112.86956,13.524333 114.61689,13.498208 116.09174,13.47371 L 119.33289,8.446626 L 118.07612,4.544022 C 116.14233,5.118866 114.64399,5.862704 112.91674,6.263822 C 112.6496,5.995376 112.48398,5.59181 112.33997,5.27991 C 112.02423,4.576839 111.7434,3.882114 111.46147,3.154964 L 105.11147,1.170589 C 105.11147,1.170589 105.27684,2.890381 105.45874,4.767269 C 105.2466,6.282074 106.25928,8.124095 105.85602,9.596431 C 105.03359,9.984186 102.61824,9.563271 102.51567,8.440962 C 102.56437,5.681703 102.80121,2.760307 102.99464,0.178398 Z",
              type: "inf",
          },
        ],
      });
      await setDoc(doc(db, "games", gameId, "frontline", "german"), {
        territories:[
          "Norway", "Finland", "East Prussia", "Poland", "Czechoslovakia", "Romania"
        ]
      });
      await setDoc(doc(db, "games", gameId, "frontline", "soviet"), {
        territories:[
          "Poselok"
          //Finnland border
          ,"Viipuri","Elisenvaara","Lakhdenpokhya","Sortavala","Ikhala","Kaalamo","Vyartsilya","Tumba","Reboli","Kostomoeksja","Voknavolok","Kalevala","Pjàozerskiy","Suoperya", "Nikel", "Rayakoski", "Svetlyi","Siyeminki","Paanajarvi", "Vuenniyaur", "Yavrozero", "Kowdor", "Alakurtti", "Vuoriyarvi"
          //East Prussia
          ,"Skuodas","Telsiai","Kelme","Taurage","Suvalki","Kalvarija","Augustow"
          //Poland
          ,"Chelm","Zamosc","Sokolka","Brzesc Litewski","Bialystok","Prezemysl","Zhovkva","Huta"
          //Czech
          ,"Ustrzyki Dolne","Sambir","Drohobych","Ivano-Frankivsk"
          //Romania
          ,"Vylkove","Cahul","Chisinau","Leova","Balti","Riscani","Ternopil","Darabani","Kolomyya","Terebovlya","Briceni"
        ],
      });

      for (let j = 0; j < territoryArray.length; j++){
        for (let i = 0; i < territoryArray[j].length; i++ ){
          await  setDoc(doc(db, "games", gameId, "territories", territoryArray[j][i].id), {
            infDivs: territoryArray[j][i].infDivs,
            tankDivs: territoryArray[j][i].tankDivs,
            startingTerritory: territoryArray[j][i].startingTerritory,
            neighbors: territoryArray[j][i].ct,
            controlledBy: territoryArray[j][i].controlledBy,
            urban: territoryArray[j][i].urban,
            defenceLevel: territoryArray[j][i].defenceLevel,
            lastAttack: 0,
            economyLevel: territoryArray[j][i].economy,
          });
        }
      }
    }

    if(scenario === "taifun"){

      await setDoc(doc(db, "games", gameId, "ww2", "actions"), {
        retreatedAll: 5,
        daugavaRF: true,
        smolenskRF: true,
        dniperRF: true,
        leningradFortified: true,
        moscowFortified: false,
        lastRFRussia: 0,
        RFBasesNorth: ["East Prussia", "Riga", "Pskov"],
        RFBasesCenter: ["Poland", "Brzesc Litewski", "Minsk", "Smolensk"],
        RFBasesSouth: ["Poland", "Lwow"],
        RFBasesDeepSouth: ["Romania"],
        lastRFGermany: 0,
        daugavaDniperBroken: false,
      });
      await updateDoc(doc(db, "games", gameId), {
        germanTerritoryPoints: 455+259.5,
        sovietTerritoryPoints: 2000-259.5,
      })
       await setDoc(doc(db, "games", gameId, "german", "territories"), {
        territories:[
          {
            name:"Finland",
            path: "m 104.39167,15.695791 c -1.67143,1.414956 -3.263,3.058116 -4.630726,4.477249 l -4.490164,0.187068 c -0.570867,0.982745 -1.20385,2.141644 -1.721858,3.183268 -0.260251,0.551225 -0.549715,1.162616 -0.634547,1.719283 0.73527,1.925602 1.235243,3.514925 1.795232,5.29373 l -1.497068,4.770768 2.245342,2.899566 -1.870686,2.806547 -1.216465,5.519041 -3.741372,-0.654738 -2.525945,-1.777153 -1.12241,0.06976 -3.285128,1.893432 -5.027083,0.396875 -3.902604,-1.389062 0.06615,-0.79375 -6.151563,-5.886979 -3.902604,-0.264584 -0.132292,2.315104 -2.579687,1.12448 c 0.659122,1.320758 1.476935,2.071193 2.702685,2.73473 1.633813,0.888309 3.12721,1.712327 4.771803,2.623084 l 8.003646,2.645833 3.730522,2.575555 2.993099,2.525943 -0.09354,4.677232 0.467672,6.173785 3.087151,3.461287 -0.654741,3.835424 -1.871202,3.554307 2.151806,1.777669 0.748273,3.834908 4.396632,-0.374137 2.244825,2.245339 1.497066,-0.841809 3.367235,2.338358 0.280604,7.01611 -6.173785,0.374136 -2.15129,2.899567 0.280604,0.748273 -4.116027,2.525945 -1.870687,2.618955 -6.454904,3.83543 -0.748274,1.68413 h -2.900082 l 0.09354,1.21595 -1.777153,0.65474 0.467672,2.05775 -2.244826,1.40355 -4.864301,-0.18708 0.187069,2.24483 -3.554823,3.18069 -0.09353,2.61896 2.993615,2.90008 -1.590601,3.55482 1.777669,0.65474 0.09354,1.40301 1.028877,0.65475 -0.09354,1.30999 1.496549,0.84181 -1.870686,-0.0935 v 2.71249 l -0.841809,1.87121 -0.561205,3.2737 0.374137,2.71301 h 2.80603 l 0.09353,-0.93534 0.561208,0.18707 0.374137,1.30948 2.993614,1.30948 h 3.461287 l -1.029393,1.02888 v 1.12292 l 1.216462,0.0935 -0.374137,0.74829 -1.497065,-0.37415 0.187068,1.12241 2.338874,1.5901 1.122413,-2.33836 c 0.326513,-0.13371 0.608088,-0.19676 0.94723,-0.19739 0.463328,0.75824 0.769268,1.44076 1.298112,2.16162 l -1.871205,-0.0935 v 0.65524 l 0.748276,0.093 0.964282,1.11569 1.852083,-0.7276 0.595313,-1.05834 1.058333,0.72761 1.455208,-0.52917 2.315104,-0.46302 2.182813,-0.66146 1.918229,0.72761 1.322917,-0.99219 0.396875,-0.66146 2.38125,-0.19844 1.984375,-0.13229 1.25677,-1.45521 1.389063,0.19844 1.653647,-1.05833 0.39687,0.85989 1.5875,-0.0661 c 0,0 0.0827,-0.26459 0.20671,-0.52917 0.12402,-0.26458 0.28939,-0.52917 0.45475,-0.52917 0.33073,0 3.30729,-0.39687 3.30729,-0.39687 l 0.19844,-0.79375 0.92604,0.66146 1.38907,0.0661 1.05833,-0.79375 1.65365,0.39688 1.12447,-1.25676 1.05834,0.99217 2.77812,0.0662 h 0.72761 l -0.19844,-0.85991 1.05833,0.0661 2.34353,-2.39675 0.60771,-0.93535 1.21647,0.0465 0.84181,-1.21594 2.94659,-0.0465 0.42064,-1.5906 c 0,0 2.05799,-1.02861 2.38539,-1.16892 0.32741,-0.14032 2.1518,-1.31 2.1518,-1.31 l 0.28061,-1.16892 2.19831,-1.5906 c 0,0 1.49676,-0.93506 2.01125,-1.16892 0.5145,-0.23386 1.21594,-1.07591 1.21594,-1.07591 l 0.28061,-1.30948 3.08715,-2.71301 1.45004,-0.84181 c 0,0 0.88848,-0.33915 1.77715,-0.72502 0.88867,-0.38586 1.77715,-0.81854 1.77715,-1.00562 0,-0.37418 0.28061,-2.61948 0.28061,-2.61948 l 3.05511,-2.66289 c -0.69542,-1.17881 -1.39687,-2.44962 -2.10153,-3.5881 -0.0167,-0.0291 -0.56017,-0.75033 -0.57207,-0.77413 -1.54478,-1.06791 -1.70671,-1.8946 -3.09417,-2.42263 -1.93724,-0.8263 -3.76532,-1.89198 -5.61258,-2.89957 0.1792,-0.93887 0.24522,-2.17438 0.93535,-2.80655 0.65481,-0.28063 2.43189,-1.96422 2.43189,-1.96422 l -0.37414,-2.43241 -2.89956,-1.02888 -1.0294,-1.49655 v -2.619478 l -1.96422,-1.590082 -1.68362,-1.122413 1.77716,-2.619478 0.74827,-2.619478 -0.46767,-3.180168 4.77077,-2.338876 0.0935,-3.180168 -1.02888,-3.08715 -1.30948,-3.741888 2.24483,-2.712498 1.21594,-3.367752 -2.33835,-3.554822 -2.52595,-2.525427 -4.11603,-3.554822 -0.74827,-2.338359 -4.67724,-0.561723 -5.79964,-5.519042 -0.37414,-6.267318 v -4.490164 l -2.80603,-1.122413 1.21595,-4.022495 -1.96474,-3.74189 -0.84181,-4.396629 -4.5837,-2.899566 h -3.83542 c -0.46378,-0.738345 -0.95264,-1.499568 -1.44953,-2.245342 -0.57167,-0.744822 -1.06312,-1.770314 -1.77695,-2.232168 z",
            type: "tank"
          },
          {
              name:"Romania",
              path:"M 102.20586,267.0321 L 100.24939,267.33854 L 97.768934,267.23934 L 96.148354,268.29767 L 94.163464,270.54663 L 93.899766,273.49335 L 90.990012,271.11662 L 89.931678,271.67886 L 85.896782,271.61326 L 85.499907,270.91873 H 82.887665 L 81.895478,270.588 L 80.90329,270.5549 L 80.737926,269.79422 L 78.488449,269.66246 L 78.024912,270.35752 L 76.900433,270.09293 H 76.899917 L 74.876783,272.23026 L 71.930195,273.3997 L 70.012482,275.13033 L 69.40425,276.72043 L 68.60895,276.58038 L 67.907701,278.03043 L 66.785288,278.68517 L 66.644728,280.27524 C 66.211036,280.36494 65.713553,280.32534 65.336288,280.48014 C 65.338688,280.98071 65.454774,281.4299 65.56936,281.91263 L 64.072811,282.42679 L 64.212855,283.68978 L 63.464579,284.11094 V 285.18684 L 62.669797,286.21573 L 61.266264,286.63636 L 59.161483,286.54286 L 58.600278,288.08644 L 57.290797,288.17994 L 57.056701,287.61874 L 55.373083,287.66574 L 54.575201,288.84086 V 289.70076 L 57.7502,291.28826 L 58.742388,293.33878 L 59.602284,295.58774 L 62.380409,296.05076 L 62.711138,297.04295 L 64.298638,297.77055 L 64.232488,300.54867 L 66.216863,300.81326 L 66.547592,301.54086 L 67.936655,301.27628 L 69.590301,302.79763 L 71.045509,302.86373 L 72.368425,301.21008 C 73.149365,301.42692 73.762424,301.8832 74.418946,302.33456 L 74.088217,302.79758 H 73.228321 L 72.831446,304.05435 L 74.154363,305.44342 L 74.305773,306.2382 L 76.748518,306.46714 L 76.935586,306.93532 L 75.626108,307.87068 L 75.672618,309.03958 L 77.496796,309.22717 C 78.139439,308.9205 78.783641,308.63741 79.330285,308.36543 C 81.661762,308.7629 83.71309,309.77337 85.915922,310.02279 C 86.988171,310.26057 87.914733,310.36741 89.049581,310.49042 L 91.294924,309.78917 L 92.791474,309.88217 L 93.820354,310.5369 L 95.410434,309.83512 L 96.112204,310.44337 C 97.710586,310.77032 99.498271,310.51007 101.00032,310.52997 C 101.53694,310.00437 101.92051,309.29704 102.46622,308.87993 C 102.90109,308.54086 103.26422,308.224 103.5721,307.82573 C 103.98527,307.50551 104.53609,307.47866 104.99896,307.49453 L 106.37304,306.97208 C 106.58472,307.66339 106.87263,308.3248 107.15025,308.99109 L 111.54689,310.48763 L 115.38748,310.58997 L 116.13059,311.84415 L 120.69051,313.5479 H 120.69103 H 123.07228 C 123.6676,313.5479 124.79207,313.21718 124.79207,313.21718 C 124.79207,313.21718 125.38738,312.42337 125.38738,312.15884 C 125.38738,311.89423 125.1228,309.97603 125.1228,309.97603 L 125.1258,309.87633 C 125.1729,308.12945 125.213,306.63218 125.2566,305.01511 C 125.6433,304.43651 126.28033,304.2446 126.8441,303.82449 C 127.10869,303.5599 128.03473,302.03855 128.03473,302.03855 L 128.36546,300.71563 C 127.82537,300.40363 127.15039,300.2268 126.71181,299.72345 C 127.0051,298.62685 128.25436,298.33359 129.22422,298.26932 L 128.95964,299.72453 L 130.21641,300.45213 C 131.09861,300.46483 132.00631,300.66805 132.86224,300.38593 C 133.26037,300.10587 133.65457,299.99152 134.11901,299.85676 C 134.19161,299.10033 133.50278,297.92222 133.9092,297.27707 C 134.24009,297.036 134.63838,296.89016 134.97891,296.68176 C 135.19823,296.46245 135.46667,295.80125 135.58197,295.53042 L 133.09168,295.18988 L 132.00028,294.62764 C 130.17587,295.0809 128.36045,295.56875 126.54324,296.04978 L 124.36043,296.31436 C 124.03454,296.65248 121.78186,295.16764 121.12025,294.82555 H 121.11973 L 120.98744,290.22841 L 120.98644,290.22041 L 120.65674,287.5818 L 121.45049,287.01956 C 121.47279,286.47875 121.23759,285.73646 121.45749,285.30236 C 121.61348,285.01302 121.79843,284.70767 121.96484,284.45175 C 121.67326,282.87691 121.04063,281.77358 120.22702,280.47114 L 119.13561,280.04172 L 118.60644,279.14875 C 118.08829,279.09375 117.57013,279.03882 117.05202,278.9834 L 116.98532,277.62741 L 116.45615,276.73444 L 115.43089,274.61724 L 113.74418,274.31959 H 113.74318 V 274.31659 C 113.35806,273.27736 112.9992,272.19475 112.64783,271.23774 C 112.13137,270.65745 111.53967,270.04552 110.8785,269.74375 C 110.22905,269.48534 109.57375,269.24915 108.94787,269.02443 L 108.20166,269.49779 L 108.18716,269.35516 L 104.08612,269.15672 Z",
              type: "tank"
          },
          {
              name:"Czechoslovakia",
              path:"M 0.17260032,262.4736 L 2.0314017,263.60014 L 3.622002,264.16135 L 4.3232513,264.536 L 5.7267833,263.50661 L 5.6797573,264.02131 H 6.849195 L 8.25221,262.6648 L 9.6552253,262.52476 L 9.9358283,261.35532 C 10.331791,260.99673 10.666754,260.62088 11.107845,260.37659 C 11.349332,260.41829 11.579903,260.6165 11.759997,260.74678 L 12.0406,260.37264 C 12.572014,260.30254 13.030682,260.23326 13.584175,260.18564 C 14.128199,260.50432 14.527759,260.91969 14.987195,261.35505 L 16.156632,261.54212 L 17.560164,261.16798 L 19.711454,262.38393 L 21.442098,262.52449 L 21.76921,261.96328 L 24.061059,262.05628 L 24.85636,263.17921 L 26.119333,262.99214 L 26.259374,263.59985 L 25.838729,264.72278 L 25.791699,266.49993 L 26.539975,267.85644 L 27.662903,268.60471 L 28.364153,268.83829 L 28.738289,269.77415 L 30.235357,270.94307 L 32.246603,272.11251 C 34.545589,272.82502 36.927099,272.5239 39.297852,272.47115 C 39.635525,272.04053 39.914975,272.01174 40.391843,271.96167 C 41.156455,271.87997 41.850251,271.80101 42.638217,271.71053 L 42.373633,270.58605 L 43.928061,269.36235 C 43.928061,269.36235 47.301498,269.42845 47.466863,269.42845 C 47.99801,269.06145 48.20986,268.31669 48.392909,267.77489 C 48.990044,267.85059 49.608663,267.68189 50.178332,267.73949 C 50.55377,268.08837 51.057454,268.30181 51.468691,268.53586 C 52.135405,268.50116 52.750702,268.57866 53.419993,268.43666 C 53.90603,268.18866 54.025722,267.57148 54.390989,267.38401 C 54.730031,267.27283 55.077146,267.20995 55.437437,267.14681 C 55.897855,266.78344 56.075125,265.97935 56.669403,265.79072 C 57.09901,265.73092 57.327639,265.2722 57.591832,264.99336 C 58.089443,264.96716 58.489317,265.01356 58.94317,265.06316 L 60.100723,264.30248 L 60.8614,265.03008 L 65.227025,264.96398 L 65.458535,265.427 C 65.458535,265.427 66.41765,265.4601 66.549941,265.4601 C 66.66394,265.6509 66.648981,265.84946 66.649151,266.05568 C 67.112409,266.48762 67.794368,266.75587 68.269727,267.04774 C 69.269485,267.30461 70.304028,267.02904 71.312435,266.91545 L 71.643164,266.25399 C 71.987331,266.31759 72.304449,266.31759 72.602274,266.28679 C 72.610574,266.28079 72.618284,266.27979 72.626034,266.28279 C 72.670794,266.31109 72.671724,266.37899 72.689074,266.41558 C 72.758074,266.7278 72.779144,267.07664 72.800714,267.37831 C 73.042555,267.25438 73.278814,267.15408 73.522635,267.06156 C 73.945914,267.46889 74.263283,268.05036 74.685903,268.40326 L 74.586683,268.93242 C 74.999364,269.0385 75.413435,269.12938 75.810381,269.19692 C 76.235732,269.43122 76.548663,269.75529 76.90179,270.08983 L 78.026269,270.35441 L 78.48929,269.65988 L 80.738248,269.79217 L 80.903613,270.55285 L 81.8958,270.58595 L 82.887988,270.91668 H 85.500748 L 85.897623,271.61121 L 89.932519,271.67731 C 90.940474,271.28196 91.034201,271.00885 90.790342,270.14823 C 90.557907,270.09223 90.285393,270.11143 90.076686,270.10793 C 90.026526,269.64961 90.081086,269.23412 90.130966,268.79994 L 88.642684,267.84083 L 88.444247,266.81557 L 87.220549,266.02182 L 85.434611,265.82338 C 85.434611,265.82338 85.194833,265.54226 84.950921,265.24047 C 84.751043,264.98949 84.561346,264.73911 84.424328,264.50614 C 84.121712,264.41534 83.761457,264.46034 83.488984,264.48304 C 82.994748,264.47404 82.552795,263.93275 82.160384,263.64124 L 80.176009,263.67434 L 80.043717,263.07903 L 78.48929,263.2444 L 78.39007,262.25221 C 78.061261,262.1134 77.684292,261.9136 77.393749,261.74014 C 76.833365,261.37472 76.74076,260.83877 76.380379,260.38516 C 75.608258,260.15698 74.545628,260.27855 73.693728,260.26776 L 73.594508,258.71333 L 68.435133,257.91958 L 66.053883,256.79511 L 62.94503,257.12583 L 59.902321,258.05188 L 57.984092,257.05969 L 54.809092,257.72115 L 53.221592,258.31646 L 51.171071,257.85344 L 48.789821,255.47219 L 44.887217,257.12583 L 42.241384,255.67063 V 253.35552 L 40.918467,252.03261 L 40.257009,250.5774 L 38.603363,250.643 L 37.809613,251.30446 L 35.296071,249.71696 L 33.047113,249.12164 L 33.907009,246.01279 C 33.907009,246.01279 33.658962,246.17815 33.344769,246.36832 C 33.030577,246.55849 32.650238,246.77346 32.385655,246.87268 C 32.319505,246.89748 32.226489,246.90878 32.114354,246.90988 C 32.002215,246.91067 31.870961,246.90188 31.728329,246.88458 C 31.443085,246.85048 31.112347,246.78638 30.798155,246.71611 C 30.169769,246.57559 29.60753,246.41019 29.60753,246.41019 L 27.1601,245.02092 H 25.969475 L 27.292392,246.74071 L 26.300204,247.79904 L 24.315829,248.85738 L 23.522079,246.80685 L 21.339267,245.81467 L 22.133017,243.96258 L 21.60385,242.9704 L 18.296558,242.63967 L 15.386142,242.04435 L 13.137183,241.71363 L 11.615829,239.59696 L 9.6314544,239.46467 L 9.5653084,241.05217 L 7.5147876,241.3829 L 6.7871835,239.7954 L 5.5304127,239.46467 L 3.7444752,240.98602 L 1.429371,241.31675 L 0.17260022,241.74463 Z",
              type: "inf"
          },
          {
              name:"East Prussia",
              path:"M 75.711141,213.27092 L 75.86152,211.91699 L 74.739107,211.09844 L 74.785617,210.11659 L 74.271437,209.83547 L 74.317947,208.08157 L 75.32357,207.77771 L 75.25329,206.81911 L 74.645576,204.99494 L 75.557664,204.36345 C 75.990472,203.88687 76.392218,203.3935 76.84389,202.98369 C 76.026233,201.92686 74.578255,201.22326 73.499398,200.83191 L 73.359357,200.01335 C 72.489302,199.33456 71.410419,199.72296 70.529556,199.45238 C 70.213345,199.14413 69.857917,198.90429 69.476906,198.63382 C 68.290786,198.39285 67.271762,197.56715 66.413528,196.97346 C 66.386138,196.54897 66.367498,196.18322 66.366518,195.73426 C 66.129444,195.28518 65.77592,194.86131 65.498352,194.50074 C 65.055207,193.92343 64.599619,193.35589 64.144947,192.78767 H 61.455704 L 61.478964,193.69976 C 61.744047,193.71616 61.97192,193.73706 62.25101,193.76946 C 62.29127,194.0431 62.20126,194.29721 62.13368,194.56472 C 61.768001,194.70741 61.499508,194.82156 61.15183,194.91562 C 61.018027,195.06898 61.013335,195.25492 60.98802,195.45363 L 60.356533,196.17866 L 60.496575,197.62818 L 61.923361,197.83902 L 62.087176,196.15488 L 62.741916,196.81014 L 63.092799,198.14288 L 63.069039,198.93818 L 62.48458,199.19552 V 201.55714 L 62.157467,202.30541 C 61.388801,202.33491 60.550832,202.38181 59.824276,202.29091 C 59.571106,202.26321 59.428137,202.19901 59.321945,202.00731 C 58.964624,201.90243 58.522435,201.95341 58.2047,201.97831 C 57.953203,201.80847 57.776375,201.57655 57.643493,201.32357 C 57.879649,201.0242 58.462783,201.1276 58.796898,201.09827 C 58.956197,200.80816 59.010698,200.43153 59.047022,200.13089 C 59.273201,199.90851 59.6752,199.81824 59.935339,199.73352 C 59.935339,199.73352 60.660604,198.56385 60.800918,198.32999 C 60.483053,198.15048 59.878674,198.23789 59.490949,198.28359 C 58.737412,198.99888 58.103865,199.74521 57.293151,200.38837 C 56.960508,200.43477 56.580904,200.34747 56.287528,200.29427 L 55.609017,201.27664 L 54.673672,201.18314 L 54.43958,201.72109 C 53.579696,201.76219 52.648867,201.73459 51.820616,201.82449 C 51.679269,202.88643 51.765246,203.76148 51.843846,204.73797 L 55.09481,204.78497 L 55.14132,205.15911 L 53.410675,205.32293 L 53.223606,206.02418 L 51.563243,206.42157 C 50.734765,207.22816 49.87065,207.57117 48.803721,207.89538 L 48.195491,208.59663 L 46.381648,208.41524 C 45.837267,209.42863 44.927931,210.1178 44.027279,210.62553 C 43.307504,211.35722 42.588008,212.02029 42.001563,212.80937 C 41.80608,213.58162 41.764615,214.27172 41.646031,215.0573 L 46.077802,214.9912 L 47.334573,216.51255 L 50.178843,215.32193 L 51.898635,215.91724 L 52.560093,217.76932 L 55.668947,219.22453 L 57.190302,217.76932 L 61.291343,217.96776 L 63.077281,217.24016 L 68.104364,216.97557 C 68.074804,216.74975 68.189974,216.63174 68.288318,216.48155 C 68.898577,216.30067 69.458365,216.42965 70.02568,216.30895 C 70.798304,216.05692 71.38072,215.78117 72.006954,215.3881 C 73.12482,214.48119 74.433327,213.9101 75.711141,213.27092 Z",
              type: "tank",
          },
          {
              name:"Poland",
              path:"M 38.60333,250.64278 L 40.256976,250.57718 L 40.918434,252.03238 L 42.241351,253.3553 V 255.67041 L 44.887184,257.12561 L 48.789788,255.47197 L 51.171038,257.85322 L 53.221559,258.31624 L 54.809059,257.72093 L 57.984059,257.05947 L 59.902288,258.05166 L 62.41583,257.12561 L 66.053851,256.79488 L 68.435101,257.91936 L 73.594476,258.71311 L 71.345517,253.48759 L 75.777288,253.61988 L 76.041871,253.02457 L 75.578851,250.51103 L 78.819996,249.51884 L 80.936147,249.28837 L 81.497352,248.54009 L 80.094338,246.85596 L 80.562008,243.67579 L 78.971925,241.14984 L 78.784857,238.43683 L 80.000803,236.47261 L 81.994996,235.62822 C 82.239384,235.17615 82.423521,234.78475 82.608912,234.31667 C 82.872156,233.18964 82.759256,231.96563 82.78875,230.79957 C 81.463722,230.3573 79.982059,230.22801 78.82,229.60895 C 78.72969,228.96406 79.164767,228.19058 79.415316,227.69072 L 81.531982,227.49228 C 81.71312,226.89395 81.826877,226.32497 81.836866,225.80918 C 81.241421,225.35001 80.480873,225.27915 79.79771,225.13268 C 78.982305,224.87437 78.79757,224.23182 78.489274,223.52348 L 79.613753,222.13442 L 80.93667,222.26671 L 81.201253,219.88546 L 79.084587,218.43025 L 79.878337,216.11515 L 75.711149,213.27088 C 73.647341,214.00339 71.988096,215.71254 70.025709,216.30842 C 69.433542,216.49224 68.819274,216.24902 68.288346,216.48102 C 68.127243,216.60872 68.116866,216.80796 68.104373,216.97505 L 63.07729,217.23963 L 61.291352,217.96724 L 57.190311,217.7688 L 55.668957,219.22401 L 52.560103,217.7688 L 51.898644,215.91672 L 50.178853,215.3214 L 47.334582,216.51203 L 46.077811,214.99068 L 41.64604,215.05678 C 41.863292,214.34259 41.70577,213.45764 42.001574,212.80886 C 42.625456,211.99869 43.289576,211.34854 44.02729,210.62501 C 45.105778,210.08514 45.836928,209.17681 46.276778,208.41579 C 46.728469,207.97866 47.268729,207.68278 47.74594,207.31767 C 48.108786,206.88002 48.58422,206.75519 49.120523,206.68932 C 49.649689,206.62322 50.178856,206.59012 50.178856,206.59012 L 50.774168,205.73022 H 48.52521 L 45.680939,207.11928 L 43.365835,208.17762 L 40.323127,206.65626 L 39.198648,203.48126 L 37.214273,203.34846 L 37.41271,204.67137 L 35.296044,206.72189 L 34.700731,207.97866 L 33.377814,209.037 L 33.708544,210.16148 L 32.782502,211.02137 L 31.459585,211.21981 L 30.731981,210.69064 L 29.739794,211.3521 C 29.829364,211.62278 29.938287,211.83582 30.074656,212.07764 C 30.49934,212.53313 31.215156,212.69626 31.790314,212.9396 L 31.724174,215.91616 L 30.202819,217.17293 L 28.549174,219.2896 L 26.961674,218.89273 L 26.23407,219.81877 C 25.238876,219.85467 24.541162,220.18628 23.720528,220.67866 L 22.000736,222.13387 L 19.024174,222.39846 L 17.105945,224.18439 L 17.833549,225.50731 L 17.304382,227.95471 L 17.50282,229.60835 L 19.09032,230.07137 L 20.34709,231.46043 L 22.133028,232.18804 L 22.72834,233.44481 C 22.72834,233.44481 23.125215,233.34561 23.530359,233.29598 C 24.448194,233.16171 24.762465,233.91783 25.465127,234.38744 C 25.986026,234.73471 26.498656,235.03237 26.498656,235.03237 L 28.483031,235.09847 L 29.475218,234.43701 L 31.98876,234.83389 L 31.790322,236.61983 L 33.973135,237.21514 L 34.237718,239.53024 C 35.098004,238.96072 35.989705,238.45966 36.900088,238.25691 C 37.850488,237.9903 38.387821,238.75103 38.884463,239.41449 C 39.547434,240.42009 40.507151,241.16362 41.381468,241.97764 C 41.350068,242.67658 41.26223,243.29102 41.315288,244.02816 C 41.813396,244.66644 42.59694,245.23252 43.167371,245.6818 L 41.513725,247.07087 C 40.826659,247.11777 40.28476,247.20139 39.793933,247.46771 C 39.661642,247.79844 38.603308,250.64271 38.603308,250.64271 Z",
              type: "tank"
          },
          {
              name:"Norway",
              path:"M 102.99489,0.17837 L 97.83552,0.376808 C 97.70669,2.62399 98.01988,4.821876 97.76942,6.792954 C 97.37171,7.761559 96.87678,8.75667 96.46304,9.61242 C 95.85121,10.877459 95.2559,12.08462 95.2559,12.08462 L 92.940685,2.89035 L 91.287039,4.610141 L 90.427143,13.473683 C 90.067346,14.137592 89.744095,14.726947 89.384312,15.371243 C 88.522499,16.659108 87.899358,18.367904 86.855266,19.36069 C 86.912746,16.344212 87.275014,13.211312 87.582914,10.695596 L 84.804789,15.39195 L 83.151144,13.275283 L 79.645414,16.847158 L 76.867289,14.532054 L 74.221456,17.508617 L 73.69229,21.014346 L 71.31104,20.220596 L 68.334477,22.866429 L 65.556352,21.345075 L 63.571977,24.189346 L 61.389165,30.142471 L 59.074061,27.496637 L 54.973019,28.422679 L 52.327186,31.663825 L 39.362602,31.994554 L 36.584477,39.66747 L 32.681873,40.858095 V 43.107054 L 25.27354,46.282054 L 24.47979,47.935699 L 32.218853,47.538824 L 32.284993,48.861741 L 21.106348,49.721637 L 24.016764,52.698199 L 23.619889,54.087262 L 19.849577,54.153412 L 19.651139,51.309141 L 12.17666,56.071641 L 11.515202,57.857578 L 13.102702,60.701849 L 8.0756188,61.032579 L 5.4297848,63.546119 L 7.4141598,64.075289 L 16.740723,62.421639 L 16.806873,63.876849 L 14.425623,66.191949 L 13.03656,65.001329 L 5.6943728,65.133619 L 4.1068725,67.647159 L 0.1737793,68.133949 V 102.74838 L 2.3870809,102.70448 L 3.908435,101.38157 L 4.0407267,98.008129 L 0.8657267,95.891459 C 0.8657267,95.891459 0.9318727,94.766979 0.9318727,94.502399 C 0.9318727,94.237819 5.495935,90.202919 5.495935,90.202919 L 5.165206,89.144589 L 6.818852,87.160209 L 7.017289,84.249799 L 7.48031,78.428959 L 8.207914,77.238339 L 11.515206,77.304439 L 14.557914,75.716939 L 14.756352,72.608079 L 18.129789,69.102349 L 21.900102,66.456519 C 21.900102,66.456519 22.032393,63.876829 22.032393,63.413809 C 21.964043,63.052309 21.754668,62.933989 21.437081,62.818499 L 21.172498,60.834129 L 24.744372,57.659125 L 25.008956,56.600792 L 29.903747,53.359646 L 36.121456,53.822667 L 37.64281,51.838292 L 37.775101,47.208083 L 43.19906,47.472667 L 51.996455,49.853917 L 56.229789,43.305479 L 55.89906,41.188813 L 60.066247,41.585688 L 62.645934,40.461208 L 62.778226,38.146104 L 66.68083,38.410688 L 72.832393,44.297667 L 72.766243,45.091417 L 76.668847,46.480479 L 81.69593,46.083604 L 84.981002,44.19018 L 86.103412,44.12042 L 88.629358,45.897573 L 92.37073,46.552311 L 93.587194,41.03327 L 95.45788,38.226723 L 93.212539,35.327157 L 94.709607,30.556389 C 94.174156,28.761975 93.509453,26.929647 92.912274,25.185149 C 93.069234,24.44288 93.456656,23.723227 93.766995,23.107239 C 94.297957,22.089309 94.722227,21.30743 95.27078,20.360118 L 99.76094,20.17305 C 99.76094,20.17305 100.02969,19.892234 100.43894,19.471285 C 101.89621,18.299989 102.90945,16.465031 104.48008,15.695801 C 105.39866,16.702128 106.0315,17.706964 106.71099,18.751953 C 107.02644,19.237515 107.3079,19.678096 107.61843,20.173054 H 111.45386 L 116.03755,23.07262 L 116.87936,27.469249 L 119.00229,23.792472 L 119.06839,22.07268 L 119.39912,19.757576 L 122.04496,21.146638 L 123.6986,20.48518 L 121.78037,16.648722 L 116.35641,16.317993 C 115.52721,15.949364 114.61121,15.534744 113.8098,15.16044 C 112.95352,14.71953 111.96103,14.353992 111.26315,13.80445 C 112.86956,13.524333 114.61689,13.498208 116.09174,13.47371 L 119.33289,8.446626 L 118.07612,4.544022 C 116.14233,5.118866 114.64399,5.862704 112.91674,6.263822 C 112.6496,5.995376 112.48398,5.59181 112.33997,5.27991 C 112.02423,4.576839 111.7434,3.882114 111.46147,3.154964 L 105.11147,1.170589 C 105.11147,1.170589 105.27684,2.890381 105.45874,4.767269 C 105.2466,6.282074 106.25928,8.124095 105.85602,9.596431 C 105.03359,9.984186 102.61824,9.563271 102.51567,8.440962 C 102.56437,5.681703 102.80121,2.760307 102.99464,0.178398 Z",
              type: "inf",
          },
        ],
      });
      await setDoc(doc(db, "games", gameId, "frontline", "german"), {
        territories:[
          "Ochakiv", "Berezivka", "Buhai", "Tiraspol", "Bilhorod-Dnistrovsky", "Shyroka Balka", "Bilozerka", "Dar'ivka", "Nikopol", 
          "Hoholivka", "Dnipro", "Saporischja", "Kobelyaky", "Kremenchuk", "Bohodukhivka", "Lazirky",
          "Zolotonosha", "Helmyaziv", "Myronivka", "Bila Tserkva", "Zarubyntsi", "Zhytomyr", "Novohrad-Volyns'kyi", "Yemil'chyne", "Глушкавічы", "Rakitna", "Lakhva",
          "Svietlahorsk", "Gomel", "Vietka", "Kapma", "Krasnapolle", "Surazh", "Mglin", "Kletnya", "Zhukovka", "Gobiki", "Novospasskoye", "Yelnys", "Suetovo", "Yartsevo",
          "Boldovka" , "Azanovo", "Ruchyevaya Mal", "Ozerets", "Sosnitsa", "Zaluchye", "Staraya Russa", "Borisovo", "Novgorod", "Skreblovo", "Luga",
          "Petrovo", "Zapolye", "Gdov", "Narva", "Primorsk", "Priozersk", "Kuytezha", "Ladva-Vetka", "Ladva", "Shyoltozero", "Ladya", "Shalgovaara", "Gimoly", "Voloma", "Yukkoguba", "Mujeserski",
          "Khaykovlya", "Kalevala", "Finland", "Norway"
        ]
      });
      await setDoc(doc(db, "games", gameId, "frontline", "soviet"), {
        territories:[
          "Poselok"
          //Finnland border
          ,"Sanatoriy","Zaporozhskoye","Lodejnoje Polje","Podporozye","Voznessenye","Powenez","Popov Porog","Kevyatozero","Muezerskii","Kepa","Louhi","Voynitsa","Pjàozerskiy","Suoperya", "Nikel", "Rayakoski", "Svetlyi","Siyeminki","Paanajarvi", "Vuenniyaur", "Yavrozero", "Kowdor", "Alakurtti", "Vuoriyarvi"
          //North
          ,"Kingisepp", "Slantsy", "Filevo", "Osmino", "Vyritsa", "Luzhki", "Porozhek", "Lyuban", "Kresttsy", "Lychkovo", "Demyansk", "Samsonovo", "Evdokimovka", "Tverskoye", "Kadishchni"
          //Center
          , "Rzhische", "Nakhimovskoyo", "Vadino", "Terenteevo", "Mokroye", "Bytosh", "Bryansk", "Izdezhichi", "Khrapovka", "Starodub", "Sachkovichi", "Klintsy", "Dobrus", "Horodnya", "Kapmaebl", "Chojniki", "Mazyr", "Lelchytsy", "Korosten'"
          //South
          ,"Radomyshl", "Ivankiv", "Kiev", "Boryspil", "Pereyaslav-Khmelnytskyi","Shramkivka","Pyryatyn", "Lokhvytsya"
          ,"Lubny", "Myrhorod", "Poltava", "Mahdalynivka", "Synelnykove", "Zaporozhe", "Enerhodor"
          ,"Nova Kakhovka", "Kherson", "Odessa"
        ],
      });

      initializeGame(user, gameId, faction);

      for (let j = 0; j < territoryArrayTaifun.length; j++){
        for (let i = 0; i < territoryArrayTaifun[j].length; i++ ){

          await  setDoc(doc(db, "games", gameId, "territories", territoryArrayTaifun[j][i].id), {
            infDivs: territoryArrayTaifun[j][i].infDivs,
            tankDivs: territoryArrayTaifun[j][i].tankDivs,
            startingTerritory: territoryArrayTaifun[j][i].startingTerritory,
            neighbors: territoryArrayTaifun[j][i].ct,
            controlledBy: territoryArrayTaifun[j][i].controlledBy,
            urban: territoryArrayTaifun[j][i].urban,
            defenceLevel: territoryArrayTaifun[j][i].defenceLevel,
            lastAttack: 0,
            lastFortified: 0,
            economyLevel: territoryArrayTaifun[j][i].economy,
          });
        }
      }

      setTerritoriesTaifun(gameId)  //needs to come after territories are already set
    
    }
    
    if (faction === "Germany") {
      await updateDoc(doc(db, "games", gameId),{
        playersGermany: [user.nickName]
      });
    } else if (faction === "Russia"){
      await updateDoc(doc(db, "games", gameId),{
        playersRussia: [user.nickName]
      });
    }
    setCreateLoaded(false)
    setCreateFinished(true)

    updateDoc(doc(db, "games", gameId), {
      loaded: true
    });
  }

  return (
    <>
    <section className='hzcenter'>
    <h1>Create New Game</h1>
    </section>
    { selected !== "" ?
    <section className='hzcenter'>
        <div>
          <NewCampaignImage
            selectedCampaign={selected}
            height="400px"
          />
        </div>
        <div className='vtcentersmall'>
          <h1>Game settings</h1>
          <hr />
          <h4>Number of players</h4>
          <section> 
            <button onClick={()=>setPlayerCount("Singleplayer")}>Singleplayer</button>
            <button onClick={()=>setPlayerCount(2)}>2</button>
            <button className="greyedOutButton" onClick={()=>setPlayerCount(4)}>4</button>
            <button className="greyedOutButton" onClick={()=>setPlayerCount(6)}>6</button>  
          </section>
          <hr />
          <h4>Visibility</h4>
          <section>
            <button onClick={()=>setOpen("public")}>Public</button>
            <button className="greyedOutButton" onClick={()=>setOpen("private")}>Private</button>
          </section>
          <hr />
          <h4>Choose faction</h4>
          <section>
            <button onClick={()=>setFaction("Germany")}>Germany</button>
            <button onClick={()=>setFaction("Russia")}>Soviet Union</button>
          </section>
          <hr />
          <button className="createButton" onClick={createGame}>Create game</button>
          {createLoaded ? <h4>Creating game.</h4> : null}
          {createFinished ? <><h4>Game Loaded.</h4><hr /><h4>Go to your multiplayer dashboard.</h4></> : null}
          
        </div>
    </section>
    :
    <section className='hzcenter'>
    <div className="campaignImg">
      <NewCampaignImage
        selectedCampaign="barb"
        desc="June 1941"
        height="300px"
        chooseMap={(campaign)=>setMap(campaign)}
      />
    </div>
    <div className="campaignImg">
    <NewCampaignImage 
        selectedCampaign="kievScenario"
        desc="September 1941"
        height="300px"
        chooseMap={(campaign)=>setMap(campaign)}
      />
    </div>
  </section>
    }
  </>
  )
}

export default CreateMultiplayerGame

/*
  <hr />
  <h4>Scenario</h4>
  <section>
    <button onClick={()=>setScenario("standard")}>Standard</button>
    <button onClick={()=>setScenario("taifun")}>Taifun</button>
  </section>

  await setDoc(doc(db, "games", gameId, "players", user.uid), {
      personalProgress: 0,
      position: faction,
      pointsToSpend: 0,
      productiveTime:0,
      semiproductiveTime:0,
      maintenanceTime:0,

    });
    await setDoc(doc(db, "games", gameId, "players", user.uid, "ww2", "economy"), {
      economyLevel: 1,
      infrastructureLevel: 1,
      tankProductionLevel: 1,
      tankResearchLevel: 1,
      recruitmentLevel: 1,
      infantryResearchLevel: 1,
      armyTrainingLevel: 1,
      winterPreparationlevel: 1,
      propagandaLevel: 1,
    });

    await setDoc(doc(db, "games", gameId, "players", user.uid, "time", "running"), {
      running: false,
      numberLogs: 0,
      startTime: 0,
    });
*/